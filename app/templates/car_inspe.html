{% extends "base.html" %}

{% block content %}
<div class="max-w-xl mx-auto mt-10 bg-white rounded-xl shadow p-6">
  <h2 class="text-xl font-bold mb-4">🚗 車検証PDF名変更ツール</h2>

  {% if error %}
    <div class="mb-4 text-red-600 font-semibold">
      ⚠️ {{ error }}
    </div>
  {% endif %}

  <form method="POST" enctype="multipart/form-data">
    <div class="mb-4">
      <label class="block mb-1 font-semibold">自動車検査証記録事項（PDF）:</label>
      <input type="file" name="pdf_files" multiple accept=".pdf" required class="w-full">
    </div>

    <div class="mb-4">
      <label class="block mb-1 font-semibold">設定ファイル（CSV）:</label>
      <input type="file" name="csv_file" accept=".csv" required class="w-full">
    </div>

    <div class="mb-4">
      <label class="block mb-1 font-semibold">OCRプリセット:</label>
      <select name="preset" class="w-full border rounded p-2">
        <option value="旧車検証_電子PDF">旧車検証_電子PDF</option>
        <option value="新車検証_電子PDF">新車検証_電子PDF</option>
      </select>
    </div>

    <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
      実行＆ダウンロード
    </button>
  </form>

  <div class="mt-6 text-sm text-gray-600">
    <p>・PDFは1ページのみ対応</p>
    <p>・OCRプリセットに応じて座標が変更されます</p>
    <p>・CSVは「ID,登録番号末尾4桁,保管場所」の形式</p>
    <p>・ファイル名：<code>車検満了日_ID_保管場所_登録番号.pdf</code></p>
    <p>・失敗時はエラーメッセージが記載されたテキストファイルがダウンロードされます</p>
  </div>
</div>
{% endblock %}
